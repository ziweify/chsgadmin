(window.webpackJsonp=window.webpackJsonp||[]).push([[143],{574:function(t,e,n){"use strict";n.r(e);n(36),n(37),n(38),n(30),n(72),n(82),n(55),n(18),n(56),n(31),n(33),n(330),n(34);var r=n(0),o=n.n(r),a=n(8),i=n(101),s=n(20),c=(n(7).immutable,function(t){return function(){Object(a.c)("/rest/member/updatepassword",{method:"POST",data:{password:t.password,oldPassword:t.oldPassword},handle:!1}).then(function(t){"success"===t.status&&Object(i.a)({icon:"success",title:"\u6210\u529f",text:t.message,button:{text:"\u8f6c\u5230\u767b\u5f55"}}).then(function(){return s.f()})}).catch(function(t){if(t.response)return Object(i.a)({title:"\u9519\u8bef",text:t.response.data.message,icon:"error",button:{text:"\u5173\u95ed"}})})}}),u=n(84),l=n(4),f=n(5),p=(n(7).immutable,f.a.div.withConfig({componentId:"ggagnp-0"})(["width:93%;margin:0 auto;position:relative;.first-time{text-align:center;margin-top:10px;}.password-form{padding:12px 0;}"])),d=f.a.div.withConfig({componentId:"ggagnp-1"})(["padding:8px 0;.rnti_text{border:1px solid #ccccce;background-color:#fff;border-radius:7px;padding:15px 10px;height:19px;position:relative;&.error{border-color:#ff1f1f;}.rntit_count{margin-top:-2px;color:#999999;font-size:16px;margin-left:5px;width:75px;float:left;position:absolute;@media (max-width:320px){font-size:14px;margin-top:0px;margin-left:0px;}}input{box-sizing:border-box;outline:medium;height:35px;float:right;width:calc(80% - 2rem);margin:-10px 0px 0px 0px;font-size:17px;border:none;color:#2061b3;@media (max-width:320px){margin:-10px 0px 0px 0px;font-size:14px;}}}"]),m=f.a.div.withConfig({componentId:"ggagnp-2"})(["display:flex;padding:8px 0;> button{background-color:#2061b3;color:#ffffff;width:100%;border-radius:7px;text-align:center;font-size:18px;border:none;padding:10px 0;margin:0 8px;display:block;@media (max-width:375px){font-size:16px;}&:first-child{margin-left:0;}&:last-child{margin-right:0;}&:active{background-color:#1f569b;}&:disabled{opacity:0.5;}}"]),b=f.a.div.withConfig({componentId:"ggagnp-3"})(["font-size:12px;color:#ff1f1f;padding:5px 10px;"]),w=n(19),x=n(888),g=n.n(x);function h(t){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t){return function(){var e,n=P(t);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=P(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(t,e){if(e&&("object"===h(e)||"function"===typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,e)}}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var O=n(7).immutable,S=[{name:"oldPassword",label:"\u65e7\u5bc6\u7801",placeholder:"\u8bf7\u8f93\u5165\u65e7\u5bc6\u7801"},{name:"newPassword",label:"\u65b0\u5bc6\u7801",placeholder:"6-20\u5b57\u7b26\u5fc5\u987b\u5305\u542b\u5927\u5c0f\u5199\u548c\u6570\u5b57"},{name:"confirmPassword",label:"\u786e\u8ba4\u5bc6\u7801",placeholder:"\u786e\u8ba4\u5bc6\u7801"}],k=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(s,o.a.PureComponent);var e,n,r,a=v(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this,t)).handleChange=function(t){var n=O(t,"currentTarget"),r=O(n,"name"),o=O(n,"value");"oldPassword"===r&&e.setState({oldPassword:o}),"newPassword"===r&&e.setState({newPassword:o}),"confirmPassword"===r&&e.setState({confirmPassword:o}),e.validateAllFields(Object.assign(Object.assign({},e.state),function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},r,o)))},e.handleSubmit=function(t){t.preventDefault();var n=e.state,r=O(n,"oldPassword"),o=O(n,"newPassword"),a=O(n,"confirmPassword");if(0===r.trim().length)return Object(i.a)({icon:"error",title:"\u9519\u8bef",text:"\u5bc6\u7801\u4e0d\u53ef\u7a7a",button:{text:"\u91cd\u65b0\u8f93\u5165"}});if(o!==a)return Object(i.a)({icon:"error",title:"\u9519\u8bef",text:"\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4",button:{text:"\u91cd\u65b0\u8f93\u5165"}});var s=e.passwordValidator(o);if(s)return Object(i.a)({icon:"error",title:"\u9519\u8bef",text:s,button:{text:"\u91cd\u65b0\u8f93\u5165"}});Object(l.a)(c({oldPassword:r,password:o}))},e.state={oldPassword:"",newPassword:"",confirmPassword:"",errors:{}},e}return e=s,(n=[{key:"componentDidMount",value:function(){Object(l.a)(Object(u.g)("password"))}},{key:"resetAllFileds",value:function(){this.setState({oldPassword:"",newPassword:"",confirmPassword:"",errors:{}})}},{key:"passwordValidator",value:function(t){var e;return t&&""!==t?t.length>0&&t.length<6?"\u5bc6\u7801\u6700\u5c11\u9700\u4e3a6\u4e2a\u5b57\u5143":t.length>20?"\u5bc6\u7801\u6700\u591a\u4e0d\u53ef\u8d85\u8fc720\u4e2a\u5b57\u5143":e:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"}},{key:"validateAllFields",value:function(t){var e=O(t,"newPassword"),n=O(t,"confirmPassword"),r=O(this.props,"username"),o={},a=e?this.passwordValidator(e):null;a&&(o.newPassword=a),e===r&&(o.newPassword="\u65b0\u5bc6\u7801\u548c\u5e10\u53f7\u4e0d\u53ef\u76f8\u540c"),n&&e!==n&&(o.confirmPassword="\u65b0\u5bc6\u7801\u4e0e\u786e\u8ba4\u5bc6\u7801\u4e0d\u76f8\u7b26"),this.setState({errors:o})}},{key:"render",value:function(){var t=this,e=this.state,n=O(e,"oldPassword"),r=O(e,"newPassword"),a=O(e,"confirmPassword"),i=O(e,"errors"),s=O(this.props,"firstTime"),c=n&&r&&a&&g()(i),u=n||r||a;return o.a.createElement(p,null,s&&o.a.createElement("div",{className:"first-time"},o.a.createElement("span",{className:"red_color"},"\u8bf7\u4fee\u6539\u60a8\u7684\u5bc6\u7801")),o.a.createElement("form",{className:"password-form component",onSubmit:this.handleSubmit},S.map(function(e){var n=O(e,"name"),r=O(e,"label"),a=O(e,"placeholder"),s=t.state[n],c=i[n];return o.a.createElement(d,{key:n},o.a.createElement("div",{className:"rnti_text ".concat(c?"error":"")},o.a.createElement("div",{className:"rntit_count"},r),o.a.createElement("input",{name:n,value:s,type:"password",className:"input",onChange:t.handleChange,placeholder:a,autoComplete:"off"})),c&&o.a.createElement(b,null,c))}),o.a.createElement(m,null,o.a.createElement("button",{type:"submit",disabled:!c},"\u786e\u5b9a"),o.a.createElement("button",{type:"button",onClick:function(){return t.resetAllFileds()},disabled:!u},"\u91cd\u7f6e"))))}}])&&y(e.prototype,n),r&&y(e,r),s}();e.default=Object(w.b)(function(t){var e=O(t,"App"),n=O(t,"UserInfo");return{firstTime:e.get("firstTime"),username:n.getIn(["info","username"])}})(k)},888:function(t,e,n){var r=n(889),o=n(891),a=n(892),i=n(227),s=n(893),c=n(897),u=n(898),l=n(899),f="[object Map]",p="[object Set]",d=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(s(t)&&(i(t)||"string"==typeof t||"function"==typeof t.splice||c(t)||l(t)||a(t)))return!t.length;var e=o(t);if(e==f||e==p)return!t.size;if(u(t))return!r(t).length;for(var n in t)if(d.call(t,n))return!1;return!0}},889:function(t,e,n){var r=n(890)(Object.keys,Object);t.exports=r},890:function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},891:function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},892:function(t,e){t.exports=function(){return!1}},893:function(t,e,n){var r=n(894),o=n(896);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},894:function(t,e,n){var r=n(335),o=n(895),a="[object AsyncFunction]",i="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";t.exports=function(t){if(!o(t))return!1;var e=r(t);return e==i||e==s||e==a||e==c}},895:function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},896:function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},897:function(t,e){t.exports=function(){return!1}},898:function(t,e){t.exports=function(){return!1}},899:function(t,e){t.exports=function(){return!1}}}]);