(function(b){b.fn.stupidtable=function(c){return this.each(function(){var d=b(this);c=c||{};c=b.extend({},b.fn.stupidtable.default_sort_fns,c);d.data("sortFns",c);d.on("click.stupidtable","thead th",function(){b(this).stupidsort()})})};function a(c){var g=c.parent();var f=g.parent();var h=g.index();var e=0;g.children(":lt("+c.index()+")").each(function(){e+=b(this).prop("colspan")||1});var d=0;f.children(":lt("+h+")").each(function(j){var k=0;b(this).children().each(function(i){var l=b(this);var m=l.prop("rowspan")||1;var n=l.prop("colspan")||1;if(m+j>h){d+=n}else{k+=n;if(k>=e){return false}}})});return d+e}b.fn.stupidsort=function(c){var k=b(this);var e=b.fn.stupidtable.dir;var j=k.closest("table");var g=k.data("sort")||null;if(g===null){return}var f=k.data("index");if(f===undefined){f=a(k);k.data("index",f)}var i;if(arguments.length==1){i=c}else{i=c||k.data("sort-default")||e.ASC;if(k.data("sort-dir")){i=k.data("sort-dir")===e.ASC?e.DESC:e.ASC}}var d={column:f,direction:i,th:k};j.trigger("beforetablesort",d);var h=i==e.ASC?1:-1;j.css("display");setTimeout(function(){var r=[];var p=j.data("sortFns");var o=p[g];if(!b.isFunction(o)){return}var m=function(u,t){return h*o(u[0],t[0],u,t)};var q=p.wrap;var s=b.isFunction(q)?function(u,t){return q(u,t,m,h)}:m;var n=j.children(j.data("body")||"tbody");var l=n.children("tr");l.each(function(v,x){var u=b(x).children().eq(f);var w=u.data("sort-value");if(typeof(w)==="undefined"){var t=u.text();u.data("sort-value",t);w=t}r.push([w,x,u])});r.sort(s);l=b.map(r,function(t){return t[1]});n.append(l);j.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc");k.data("sort-dir",i).addClass("sorting-"+i);j.trigger("aftertablesort",d);j.css("display")},10);return k};b.fn.stupidtable.dir={ASC:"asc",DESC:"desc"};b.fn.stupidtable.default_sort_fns={number:function(d,c){return Number(d)-Number(c)},string:function(d,c){return d.localeCompare(c)},"string-ins":function(d,c){d=d.toLocaleLowerCase();c=c.toLocaleLowerCase();return d.localeCompare(c)}}})(jQuery);