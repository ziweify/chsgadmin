var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){if(!("MobileSelect"in window))throw new Error("基于插件mobileSelect.js封装，请先导入mobileSelect.js文件");var e=function(e){this.timeSelect,this.defaultOpts={model:"date",minDate:new Date("2000/01/01 00:00:00"),maxDate:new Date,checkDate:new Date,triggerDisplayData:!0},this.cacheData={clickSate:!1},this._MobileSelector=null,this.init(e)};e.prototype={constructor:e,init:function(e){var t=this;t.extendsOpts(e,t.defaultOpts),t.typeOfConfig(t.defaultOpts),t.createWheelsData(),t.exportTimeSelect()},typeOfConfig:function(e){var t={inputDate:function(e){if(!(e instanceof Date))throw new Error("输入的日期必须是 Date 对象")},compareDate:function(e){if(+e.minDate>+e.maxDate)throw new Error("最大可选日期 必须大于 最小可选日期！");if(+e.minDate>+e.checkDate)throw new Error("默认选中日期 不能小于 最小可选日期！");if(+e.maxDate<+e.checkDate)throw new Error("默认选中日期 不能大于 最大可选日期！")}};Object.keys(e).forEach(function(a,r){a.indexOf("Date")>-1&&t.inputDate(e[a])}),t.compareDate(e)},extendsOpts:function(e,t){if(e&&"object"===(void 0===e?"undefined":_typeof(e)))for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])},isCheckDateisToday:function(){var e=this.cacheData,t=getDateStr(0,!0).split("-");return e.todayYear=+t[0],e.todayMonth=+t[1],e.todayDate=+t[2],e.checkDate==t[2]&&e.checkMonth==t[1]&&e.checkYear==t[0]},getLimitData:function(e,t,a){var r=this.defaultOpts;t.forEach(function(t){e.forEach(function(e){"Year"==t&&(a[e+t]=r[e+"Date"].getFullYear()),"Month"==t&&(a[e+t]=r[e+"Date"].getMonth()+1),"Date"==t&&(a[e+t]=r[e+"Date"].getDate()),"Hour"==t&&(a[e+t]=r[e+"Date"].getHours()),"Minutes"==t&&(a[e+t]=r[e+"Date"].getMinutes()),"Seconds"==t&&(a[e+t]=r[e+"Date"].getSeconds())})})},createWheelRenderData:function(e,t,a,r,o){for(var i=this.cacheData,n=e.charAt(0).toUpperCase()+e.slice(1),c=t;c<=a;c++){var h={id:c<10?"0"+c:c,value:c<10?"0"+c+r:c+r};i[e+"Arr"].push(h),i["check"+n]===c&&i.pointArr.push(i[e+"Arr"].length-1),!1===o&&i["today"+n]===c&&i.todayArr.push(i[e+"Arr"].length-1)}},createWheelsData:function(){var e=this,t=e.defaultOpts,a=e.cacheData;e.getLimitData(["max","min","check"],["Year","Month","Date","Hour","Minutes","Seconds"],a);var r=e.isCheckDateisToday();a.pointArr=[],a.todayArr=[],a.yearArr=[],a.monthArr=[],a.dateArr=[],r&&(a.todayArr=a.pointArr);var o=a.checkYear+"-"+(a.checkMonth<10?"0"+a.checkMonth:a.checkMonth)+"-"+(a.checkDate<10?"0"+a.checkDate:a.checkDate),i=a.checkHour+":"+a.checkMinutes+":"+a.checkSeconds;"time"===t.model&&(o=o+" "+i),$(t.trigger).text(o),e.createWheelRenderData("year",a.minYear,a.maxYear,"年",r),e.createWheelRenderData("month",1,12,"月",r),e.createWheelRenderData("date",1,31,"日",r),"time"===t.model&&(a.hourArr=[],a.minutesArr=[],a.secondsArr=[],e.createWheelRenderData("hour",0,23,"时"),e.createWheelRenderData("minutes",0,59,"分"),e.createWheelRenderData("seconds",0,59,"秒")),a.limitMonthArr=a.monthArr.slice(0,a.maxMonth),a.limitDateArr=a.dateArr.slice(0,a.maxDate)},to_Month_Length:function(e,t){return"01,03,05,07,08,10,12".indexOf(t)>-1?31:"02"==t?e%2==0?29:28:30},toLocaPosition:function(e,t,a){e>t&&this.locatePosition(a,t-1)},refreshState:function(e,t){var a=this,r=a._MobileSelector,o=a.defaultOpts,i=a.cacheData;$(o.trigger).text(t),r.locatePosition(0,i.todayArr[0]),r.updateWheel(1,i.limitMonthArr),r.updateWheel(2,i.limitDateArr),i.pointArr=[i.todayArr[0],i.todayArr[1],i.todayArr[2]+e],i.clickSate=!0},exportTimeSelect:function(){var e=this,t=e.defaultOpts,a=e.cacheData,r=[{data:a.yearArr},{data:a.monthArr},{data:a.dateArr}],o=[{data:a.hourArr},{data:a.minutesArr},{data:a.secondsArr}],i="date"===t.model?r:r.concat(o),n=new MobileSelect({trigger:t.trigger,title:"选择日期",wheels:i,position:a.pointArr,connector:"-",triggerDisplayData:t.triggerDisplayData||!0,transitionEnd:function(t,r){var o=this.wheelsData[1].data.length,i=this.wheelsData[2].data.length,n=e.to_Month_Length(r[0].id,r[1].id);if(r[0].id!=a.maxYear){if(o==a.maxMonth&&this.updateWheel(1,a.monthArr),i!==n){c=a.dateArr.slice(0,n);this.updateWheel(2,c),e.toLocaPosition.call(this,r[2].id,n,2)}}else if(o!=a.maxMonth&&this.updateWheel(1,a.limitMonthArr),e.toLocaPosition.call(this,r[1].id,a.maxMonth,1),r[1].id<a.maxMonth){var c=a.dateArr.slice(0,n);r[1].id<a.maxMonth&&this.updateWheel(2,c),e.toLocaPosition.call(this,r[2].id,n,2)}else this.updateWheel(2,a.limitDateArr),e.toLocaPosition.call(this,r[2].id,a.maxDate,2)},callback:function(e,r,o){var i=this.trigger.innerHTML;(i=(i=i.replace(/[年月时分秒]/g,"")).replace(/日/g," ").split(" "))[1]?(i[1]=i[1].replace(/-/g,":").replace(/:/,""),this.trigger.innerHTML=i.join(" ")):this.trigger.innerHTML=i[0],a.clickSate=!1,t.callback&&t.callback(e,r)},onShow:function(e){0===e.curIndexArr.length&&(e.updateWheel(1,a.monthArr.slice(0,a.maxMonth)),e.updateWheel(2,a.dateArr.slice(0,a.maxDate)));for(var t=a.clickSate?a.pointArr:e.curIndexArr.length>0?e.curIndexArr:a.pointArr,r=0;r<a.pointArr.length;r++)e.locatePosition(r,t[r])}});e._MobileSelector=n}},"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e:"function"==typeof define&&define.amd?define([],function(){return e}):window.TimeSelect=e}();